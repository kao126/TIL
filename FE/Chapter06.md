## 6-1 データベース ◎
- データベース（DB/Data Base）：一定の規則に従って関連性のあるデータを蓄積したもの
- データモデル：実世界におけるデータの集合をデータベース上で利用可能にするもの
  - **関連モデル**：データの関係を数学モデル（集合論など）で表現したもの
  - **関連データベース**（RDB/Relational Data Base）：行と列から構成される2次元の表によって表現されるデータベース（リレーショナルデータベース）
- **スキーマ**：データの形式や性質、他のデータとの関連などのデータ定義の集合
  - 3層スキーマ：「外部」「概念」「内部」
- **データベース管理システム**（DBMS/Data Base Management System）：複数の利用者で大量のデータを共同利用できるように管理するソフトウェア


## 6-2 データベース設計 ◎
- データベース設計
  - E-R図：対象業務を構成する実体（人・もの・場所・事業など）と実体間の関連を視覚的に表した図
    - エンティティ：実体のこと
    - リレーションシップ：実体間の関連のこと
- 表の設計
  - 主キー（Primary Key）：表中の行を一意に識別するための列のこと
    - 一意制約：主キーの値が同じ行が複数存在することはない
    - 非NULL制約：必ず値が入力されている必要がある
  - 外部キー（Foreign Key）：他の表の主キーを参照している列のこと
    - 参照制約：関連する表間で参照一貫性が維持されるよう（矛盾が発生しないよう）制約される
  - リレーション：関連データベースでは、表間は主キーと外部キーで関係付いている


> 「E-R図」とくれば「実体と実体間の関連を表した図」

> 「主キー」とくれば「行を一意に識別するための列のこと。一意制約。非NULL制約」
> 
> 「外部キー」とくれば「他の表の主キーを参照する列のこと。参照制約」


## 6-3 データの正規化 ◎
- データの正規化：必要なデータ項目を整理してデータが重複しないように表を分割すること
- 複合主キー：複数の列を組み合わせた主キーのこと


> 「データの正規化の目的」とくれば「データの重複や矛盾を排除すること」

> 「第1正規化」とくれば「繰り返し項目を別の表に分割する」
> 
> 「第2正規化」とくれば「主キーを構成している一部の項目によって決定される項目を別の表に分割する」
> 
> 「第3正規化」とくれば「・主キー以外の項目によって決定される項目を別の表に分割する ・計算で求まる項目を削除する」


## 6-4 トランザクション処理 ☆
- トランザクション処理：データベース更新時に切り離すことができない一連の処理のこと
  - ACID特性
    - **原子性**
    - 一貫性
    - 独立性
    - 耐久性
- **排他制御**：データベース更新時にデータの不整合が発生しないように、データの更新中はアクセスを制御（ロック）して、別のトランザクションから更新できないよう制御すること
- **共有ロック**：トランザクションがデータを参照する前にかけるロック
- **専有ロック**：トランザクションがデータを更新する前にかけるロック
- **デッドロック**：複数のトランザクションが、互いに相手が専有ロックしている資源を要求して待ち状態となり、実行できなくなる状態
- **2相コミットメント**：一連のトランザクション処理を行う複数サイトに更新処理が確定可能かどうかを問い合わせた後、全てのサイトが確定可能であれば、更新処理を確定する方式

> 「排他制御の目的」とくれば「データの不整合を防ぐこと」

> 「デッドロック」とくれば「お互いのロック解放待ち」

> 「2相コミットメント」とくれば「コミットするか、ロールバックするかのどちらか」


## 6-5 データベースの障害回復 ◎
- ログファイル
  - フルバックアップファイル：データベースの全データをバックアップ
  - **ログファイル**：データベースの更新前や更新後の値を書き出して、データベースの更新記録を取ったもの（ジャーナルファイル）
- データベースの障害回復
  - **ロールフォワード**：データベースのハードウェア障害に対して、フルバックアップ時点の状態に復元した後、ログファイルの更新後情報を使用して復旧させる方法
  - **ロールバック**：トランザクション処理プログラムが、データベースの更新途中に異常終了した場合に、ログファイルの更新前情報を使用して復旧させる方法


> 「ログファイル」とくれば「データベースの更新記録（更新前・更新後）」

> 「ロールフォワード」とくれば「フルバックアップファイルとログファイルの更新後情報で復旧する」

> 「ロールバック」とくれば「ログファイルの更新前情報で復旧する」


## 6-6 データ操作とSQL ☆
- 関係演算：関係データベースの表から目的のデータを取り出す演算
  - **射影**
  - **選択**
  - **結合**

- SQL：関係データベースの表を定義したり、データを操作したりするときに使用する言語
  - DDL：データベースや表などを定義するデータ定義言語
  - DML：データの抽出や挿入、更新、削除などを行うデータ操作言語

- ビュー：実際に存在する実表から必要な部分を取り出して、一時的に作成した表のこと

> 「射影」とくれば「列を抽出する」
> 
> 「選択」とくれば「行を抽出する」
> 
> 「結合」とくれば「二つ以上の表を結合して、一つの表を生成する」


## 6-7 SQL（並べ替え・グループ化） ◎
- 集合関数：指定した列の値を集計する関数
  - SUM
  - AVG
  - MAX
  - MIN
  - COUNT

> 「ORDER BY」とくれば「並べ替え。ASC（昇順）、DESC（降順）」
> 
> 「COUNT（＊）」とくれば「行動を求める関数」
> 
> 「GROUP BY」とくれば「グループ化」
> 
> 「AS」とくれば「別名を付ける」
> 
> 「HAVING」とくれば「グループに対して条件を付ける」


## 6-8 SQL（副問合せ）
- 副問合せ：「SELECT文のWHERE」に、さらに「SELECT文」を組み込み、いったん抽出した結果を条件として、再度抽出すること
- 相関副問合せ：主問合せから副問合せに一行ずつ渡し、存在の有無を判断して「真」か「偽」の結果を、副問合せから主問合せに返すことを繰り返しながら抽出すること
- 組込みSQL：C言語などで書かれたプログラム内にSQLを記述して、関係データベースの操作をプログラムから行うことができる


## 6-9 データベースの応用 ◎
- NoSQL（Not Only SQL）：SQLを使わないで操作するデータベース全般のこと
  - キーバリュー型
  - カラム指向型
  - ドキュメント指向型
  - グラフ指向型
- データベースの応用
  - **データウェアハウス**
  - データレイク
  - データマート
  - **データマイニング**
  - BIツール
- ビッグデータ：多種多様で高頻度に更新される大量のデータのこと
- オープンデータ：機械判読に適した形式で、原則無償で自由に二次利用できるというルールの下で、国・自治体・企業などが公開するデータ
- データ資源の管理
  - リポジトリ
  - データディクショナリ
